{% extends "base.html" %}

{% block title %}CyberRakshak AI - Scam Detection Scanner{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-4 fw-bold mb-3">
                <i data-feather="shield-check" class="text-success me-3"></i>
                <span id="hero-title">CyberRakshak AI</span>
            </h1>
            <p class="lead text-muted" id="hero-subtitle">
                Protect yourself from online scams with AI-powered detection
            </p>
        </div>
    </div>

    <!-- Analysis Tabs -->
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-dark">
                    <ul class="nav nav-tabs card-header-tabs" id="analysisTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="text-tab" data-bs-toggle="tab" data-bs-target="#text-panel" type="button">
                                <i data-feather="type" class="me-2"></i>
                                <span data-lang-key="text_analysis">Text Analysis</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="image-tab" data-bs-toggle="tab" data-bs-target="#image-panel" type="button">
                                <i data-feather="image" class="me-2"></i>
                                <span data-lang-key="image_analysis">Image Analysis</span>
                            </button>
                        </li>
                    </ul>
                </div>
                
                <div class="card-body">
                    <div class="tab-content" id="analysisTabContent">
                        <!-- Text Analysis Panel -->
                        <div class="tab-pane fade show active" id="text-panel" role="tabpanel">
                            <form id="text-form">
                                <div class="mb-4">
                                    <label for="text-input" class="form-label fw-semibold" data-lang-key="paste_message">
                                        Paste your message here:
                                    </label>
                                    <textarea class="form-control" id="text-input" rows="6" 
                                              placeholder="Copy and paste the suspicious SMS, email, or WhatsApp message here..."
                                              data-lang-key="text_placeholder"></textarea>
                                </div>
                                
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="analyze-text-btn">
                                        <i data-feather="search" class="me-2"></i>
                                        <span data-lang-key="analyze_text">Analyze Text</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Image Analysis Panel -->
                        <div class="tab-pane fade" id="image-panel" role="tabpanel">
                            <form id="image-form" enctype="multipart/form-data">
                                <div class="mb-4">
                                    <label for="image-input" class="form-label fw-semibold" data-lang-key="upload_screenshot">
                                        Upload Screenshot:
                                    </label>
                                    <div class="upload-area border-2 border-dashed rounded p-5 text-center" id="upload-area">
                                        <i data-feather="upload-cloud" size="48" class="text-muted mb-3"></i>
                                        <p class="mb-2" data-lang-key="drag_drop">Drag and drop your image here</p>
                                        <p class="text-muted small mb-3" data-lang-key="or_click">or click to select file</p>
                                        <input type="file" class="form-control d-none" id="image-input" 
                                               accept="image/*" name="file">
                                        <button type="button" class="btn btn-outline-secondary" 
                                                onclick="document.getElementById('image-input').click()">
                                            <i data-feather="folder" class="me-2"></i>
                                            <span data-lang-key="choose_file">Choose File</span>
                                        </button>
                                    </div>
                                    <div class="form-text" data-lang-key="supported_formats">
                                        Supported formats: PNG, JPG, JPEG, GIF, BMP, TIFF, WebP
                                    </div>
                                </div>
                                
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg" id="analyze-image-btn">
                                        <i data-feather="camera" class="me-2"></i>
                                        <span data-lang-key="analyze_image">Analyze Image</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Section -->
    <div class="row mt-5" id="results-section" style="display: none;">
        <div class="col-lg-10 mx-auto">
            <div class="card border-0 shadow-lg" id="results-card">
                <div class="card-header d-flex align-items-center">
                    <i data-feather="activity" class="me-2"></i>
                    <h5 class="mb-0" data-lang-key="analysis_results">Analysis Results</h5>
                </div>
                <div class="card-body" id="results-content">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div class="modal fade" id="loadingModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="spinner-border text-primary mb-3" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <h5 data-lang-key="analyzing">Analyzing...</h5>
                    <p class="text-muted mb-0" data-lang-key="please_wait">Please wait while we check for scams</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Warning Sound -->
<audio id="warning-sound" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLMeS0FJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBSuL1vLNeSsFJHfH8N2QQfkARKNxU8HUVdU=" type="audio/wav">
</audio>
{% endblock %}

{% block extra_scripts %}
<script>
// Language translations for JavaScript
const translations = {
    en: {
        hero_title: "CyberRakshak AI",
        hero_subtitle: "Protect yourself from online scams with AI-powered detection",
        text_analysis: "Text Analysis",
        image_analysis: "Image Analysis",
        paste_message: "Paste your message here:",
        text_placeholder: "Copy and paste the suspicious SMS, email, or WhatsApp message here...",
        analyze_text: "Analyze Text",
        upload_screenshot: "Upload Screenshot:",
        drag_drop: "Drag and drop your image here",
        or_click: "or click to select file",
        choose_file: "Choose File",
        supported_formats: "Supported formats: PNG, JPG, JPEG, GIF, BMP, TIFF, WebP",
        analyze_image: "Analyze Image",
        analysis_results: "Analysis Results",
        analyzing: "Analyzing...",
        please_wait: "Please wait while we check for scams",
        scam_detected: "üö® SCAM DETECTED!",
        no_scam_detected: "‚úÖ No Scam Detected",
        confidence_level: "Confidence Level",
        scam_type: "Scam Type",
        extracted_text: "Extracted Text",
        keywords_found: "Suspicious Keywords Found",
        link_analysis: "Link Analysis",
        warning_voice: "Warning! Potential scam detected. Please be very careful.",
        safe_voice: "Analysis complete. No immediate threats detected."
    },
    hi: {
        hero_title: "‡§∏‡§æ‡§á‡§¨‡§∞ ‡§∞‡§ï‡•ç‡§∑‡§ï ‡§è‡§Ü‡§à",
        hero_subtitle: "‡§è‡§Ü‡§à-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§°‡§ø‡§ü‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§∏‡•á ‡§ñ‡•Å‡§¶ ‡§ï‡•ã ‡§¨‡§ö‡§æ‡§è‡§Ç",
        text_analysis: "‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
        image_analysis: "‡§á‡§Æ‡•á‡§ú ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
        paste_message: "‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§π‡§æ‡§Å ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç:",
        text_placeholder: "‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß SMS, ‡§à‡§Æ‡•á‡§≤, ‡§Ø‡§æ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§ê‡§™ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•â‡§™‡•Ä ‡§î‡§∞ ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç...",
        analyze_text: "‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç",
        upload_screenshot: "‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç:",
        drag_drop: "‡§Ö‡§™‡§®‡•Ä ‡§á‡§Æ‡•á‡§ú ‡§Ø‡§π‡§æ‡§Å ‡§°‡•ç‡§∞‡•à‡§ó ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™ ‡§ï‡§∞‡•á‡§Ç",
        or_click: "‡§Ø‡§æ ‡§´‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç",
        choose_file: "‡§´‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç",
        supported_formats: "‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™: PNG, JPG, JPEG, GIF, BMP, TIFF, WebP",
        analyze_image: "‡§á‡§Æ‡•á‡§ú ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç",
        analysis_results: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ",
        analyzing: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
        please_wait: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§ú‡§¨ ‡§§‡§ï ‡§π‡§Æ ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç",
        scam_detected: "üö® ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§ö‡§≤‡§æ!",
        no_scam_detected: "‚úÖ ‡§ï‡•ã‡§à ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ",
        confidence_level: "‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ç‡§§‡§∞",
        scam_type: "‡§∏‡•ç‡§ï‡•à‡§Æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
        extracted_text: "‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü",
        keywords_found: "‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§∂‡§¨‡•ç‡§¶ ‡§Æ‡§ø‡§≤‡•á",
        link_analysis: "‡§≤‡§ø‡§Ç‡§ï ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
        warning_voice: "‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä! ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§∏‡•ç‡§ï‡•à‡§Æ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§ö‡§≤‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§π‡•Å‡§§ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç‡•§",
        safe_voice: "‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•Ç‡§∞‡§æ‡•§ ‡§ï‡•ã‡§à ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ñ‡§§‡§∞‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§"
    }
};

// Update page text based on language
function updatePageText(language) {
    const lang = translations[language] || translations.en;
    
    // Update elements with data-lang-key attributes
    document.querySelectorAll('[data-lang-key]').forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (lang[key]) {
            if (element.tagName === 'INPUT' && element.type === 'text') {
                element.placeholder = lang[key];
            } else if (element.tagName === 'TEXTAREA') {
                element.placeholder = lang[key];
            } else {
                element.textContent = lang[key];
            }
        }
    });
    
    // Update specific elements by ID
    const heroTitle = document.getElementById('hero-title');
    const heroSubtitle = document.getElementById('hero-subtitle');
    
    if (heroTitle) heroTitle.textContent = lang.hero_title;
    if (heroSubtitle) heroSubtitle.textContent = lang.hero_subtitle;
}

// Listen for language changes
document.addEventListener('languageChanged', function(event) {
    updatePageText(event.detail.language);
});

// Initialize page text on load
document.addEventListener('DOMContentLoaded', function() {
    const currentLanguage = localStorage.getItem('language') || 'en';
    updatePageText(currentLanguage);
});
</script>
{% endblock %}
